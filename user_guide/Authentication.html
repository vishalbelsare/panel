
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Authentication — Panel 0.12.0 documentation</title>
<link href="../_static/css/theme.css" rel="stylesheet"/>
<link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet"/>
<link href="../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../_static/basic.css" rel="stylesheet" type="text/css">
<link href="../_static/togglebutton.css" rel="stylesheet" type="text/css">
<link href="../_static/mystnb.css" rel="stylesheet" type="text/css"/>
<link href="../_static/graphviz.css" rel="stylesheet" type="text/css"/>
<link href="../_static/nbsite.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js" rel="preload"/>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/togglebutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
<link href="../_static/favicon.ico" rel="shortcut icon">
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="Django_Apps.html" rel="next" title="Django Apps"/>
<link href="Async_and_Concurrency.html" rel="prev" title="Async and Concurrency"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
</link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>
<nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-top bd-navbar" id="navbar-main"><div class="container-xl">
<div id="navbar-start">
<a class="navbar-brand" href="../index.html">
<img alt="logo" class="logo" src="../_static/logo_horizontal.png"/>
</a>
</div>
<button aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar-collapsible" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="col-lg-9 collapse navbar-collapse" id="navbar-collapsible">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../getting_started/index.html">
  Getting Started
 </a>
</li>
<li class="toctree-l1 current active nav-item">
<a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../gallery/index.html">
  Gallery
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../reference/index.html">
  Reference Gallery
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../developer_guide/index.html">
  Developers
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../api/index.html">
  API
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../releases.html">
  Releases
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../FAQ.html">
  FAQ
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../about/index.html">
  About
 </a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/holoviz/panel" rel="noopener" target="_blank" title="GitHub">
<span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://twitter.com/Panel_Org" rel="noopener" target="_blank" title="Twitter">
<span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://discourse.holoviz.org/" rel="noopener" target="_blank" title="Discourse">
<span><i class="fab fa-discourse"></i></span>
<label class="sr-only">Discourse</label>
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<div class="container-xl">
<div class="row">
<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="col-12 col-md-2 bd-sidebar"><form action="../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form><nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item active">
<ul class="current nav bd-sidenav">
<li class="toctree-l1">
<a class="reference internal" href="Overview.html">
   Overview
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Components.html">
   Components
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="APIs.html">
   APIs
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Customization.html">
   Customization
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Deploy_and_Export.html">
   Deploy &amp; Export
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Interact.html">
   Interact
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Widgets.html">
   Widgets
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Param.html">
   Parameters
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Links.html">
   Linking
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Pipelines.html">
   Pipelines
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Templates.html">
   Templates
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Server_Deployment.html">
   Server Deployment
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Custom_Components.html">
   Building Custom Components
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Async_and_Concurrency.html">
   Asynchronous and Concurrent Process
  </a>
</li>
<li class="toctree-l1 current active">
<a class="current reference internal" href="#">
   Authentication
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Django_Apps.html">
   Django Apps
  </a>
</li>
</ul>
</div>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 bd-toc">
<div class="toc-item">
<div class="tocsection onthispage pt-5 pb-3">
<i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#configuring-oauth">
   Configuring OAuth
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#oauth-provider">
<code class="docutils literal notranslate">
<span class="pre">
       oauth_provider
      </span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#oauth-key-and-oauth-secret">
<code class="docutils literal notranslate">
<span class="pre">
       oauth_key
      </span>
</code>
     and
     <code class="docutils literal notranslate">
<span class="pre">
       oauth_secret
      </span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#oauth-extra-params">
<code class="docutils literal notranslate">
<span class="pre">
       oauth_extra_params
      </span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#cookie-secret">
<code class="docutils literal notranslate">
<span class="pre">
       cookie_secret
      </span>
</code>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#encryption">
     Encryption
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#redirect-uri">
     Redirect URI
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#summary">
     Summary
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#accessing-oauth-information">
   Accessing OAuth information
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#oauth-providers">
   OAuth Providers
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#azure-active-directory">
<strong>
      Azure Active Directory
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#bitbucket">
<strong>
      Bitbucket
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#github">
<strong>
      GitHub
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#gitlab">
<strong>
      GitLab
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#google">
<strong>
      Google
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#okta">
<strong>
      Okta
     </strong>
</a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#plugins">
     Plugins
    </a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
<div class="toc-item">
</div>
<a href="https://mybinder.org/v2/gh/holoviz/panel/master?urlpath=lab/tree/examples/user_guide/Authentication">Open this example in Binder</a>
</div>
<main class="col-12 col-md-10 col-xl-8 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
<div>
<div class="section" id="authentication">
<h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<p>Authentication is a difficult topic fraught with potential pitfalls and complicated configuration options. Panel aims to be a “batteries-included” package for building applications and dashboards and therefore ships with a number of inbuilt providers for authentication in an application.</p>
<p>The primary mechanism by which Panel performs autentication is <a class="reference external" href="https://oauth.net/2/">OAuth 2.0</a>. The official specification for OAuth 2.0 describes the protocol as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The OAuth 2.0 authorization framework enables a third-party
application to obtain limited access to an HTTP service, either on
behalf of a resource owner by orchestrating an approval interaction
between the resource owner and the HTTP service, or by allowing the
third-party application to obtain access on its own behalf.
</pre></div>
</div>
<p>In other words OAuth outsources authentication to a third party provider, e.g. GitHub, Google or Azure AD, to authenticate the user credentials and give limited access to the APIs of that service.</p>
<p>Note that since Panel is built on Bokeh server and Tornado it is also possible to implement your own authentication independent of the OAuth components shipped with Panel, <a class="reference external" href="https://docs.bokeh.org/en/latest/docs/user_guide/server.html#authentication">see the Bokeh documentation</a> for further information.</p>
<div class="section" id="configuring-oauth">
<h2>Configuring OAuth<a class="headerlink" href="#configuring-oauth" title="Permalink to this headline">¶</a></h2>
<p>The OAuth component will stop any user from accessing the application before first logging into the selected provider. The configuration to set up OAuth is all handled via the global <code class="docutils literal notranslate"><span class="pre">pn.config</span></code> object, which has a number of OAuth related parameters. When launching the application via the <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> CLI command these config options can be set as CLI arguments or environment variables, when using the <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> function on the other hand these variables can be passed in as arguments.</p>
<div class="section" id="oauth-provider">
<h3><code class="docutils literal notranslate"><span class="pre">oauth_provider</span></code><a class="headerlink" href="#oauth-provider" title="Permalink to this headline">¶</a></h3>
<p>The first step in configuring a OAuth is to specify a specific OAuth provider. Panel ships with a number of providers by default:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">azure</span></code>: Azure Active Directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitbucket</span></code>: Bitbucket</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">github</span></code>: GitHub</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gitlab</span></code>: GitLab</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">google</span></code>: Google</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">okta</span></code>: Okta</p></li>
</ul>
<p>We will go through the process of configuring each of these individually later but for now all we need to know that the <code class="docutils literal notranslate"><span class="pre">oauth_provider</span></code> can be set on the commandline using the <code class="docutils literal notranslate"><span class="pre">--oauth-provider</span></code> CLI argument to <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> or the <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_PROVIDER</span></code> environment variable.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">provider</span><span class="o">=...</span>

<span class="n">PANEL_OAUTH_PROVIDER</span><span class="o">=...</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-key-and-oauth-secret">
<h3><code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code><a class="headerlink" href="#oauth-key-and-oauth-secret" title="Permalink to this headline">¶</a></h3>
<p>To authenticate with a OAuth provider we generally require two pieces of information (although some providers will require more customization):</p>
<ol class="simple">
<li><p>The Client ID is a public identifier for apps.</p></li>
<li><p>The Client Secret is a secret known only to the application and the authorization server.</p></li>
</ol>
<p>These can be configured in a number of ways the client ID and client secret can be supplied to the <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> command as <code class="docutils literal notranslate"><span class="pre">--oauth-key</span></code> and <code class="docutils literal notranslate"><span class="pre">--oauth-secret</span></code> CLI arguments or <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_KEY</span></code> and <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_SECRET</span></code> environment variables respectively.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">key</span><span class="o">=...</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">secret</span><span class="o">=...</span>

<span class="n">PANEL_OAUTH_KEY</span><span class="o">=...</span> <span class="n">PANEL_OAUTH_KEY</span><span class="o">=...</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-extra-params">
<h3><code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code><a class="headerlink" href="#oauth-extra-params" title="Permalink to this headline">¶</a></h3>
<p>Some OAuth providers will require some additional configuration options which will become part of the OAuth URLs. The <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code> configuration variable allows providing this additional information and can be set using the <code class="docutils literal notranslate"><span class="pre">--oauth-extra-params</span></code> CLI argument or <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_EXTRA_PARAMS</span></code>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">extra</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">'tenant_id'</span><span class="p">:</span> <span class="o">...</span><span class="p">}</span>

<span class="n">PANEL_OAUTH_EXTRA_PARAMS</span><span class="o">=</span><span class="p">{</span><span class="s1">'tenant_id'</span><span class="p">:</span> <span class="o">...</span><span class="p">}</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="cookie-secret">
<h3><code class="docutils literal notranslate"><span class="pre">cookie_secret</span></code><a class="headerlink" href="#cookie-secret" title="Permalink to this headline">¶</a></h3>
<p>Once authenticated the user information and authorization token will be set as secure cookies. Cookies are not secure and can easily be modified by clients. A secure cookie ensures that the user information cannot be interfered with or forged by the client by signing it with a secret key. Note that secure cookies guarantee integrity but not confidentiality. That is, the cookie cannot be modified but its contents can be seen by the user. To generate a <code class="docutils literal notranslate"><span class="pre">cookie_secret</span></code> use the <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">secret</span></code> CLI argument or generate some other random non-guessable string, ideally with at least 256-bits of entropy.</p>
<p>To set the <code class="docutils literal notranslate"><span class="pre">cookie_secret</span></code> supply it as a CLI argument or set the <code class="docutils literal notranslate"><span class="pre">PANEL_COOKIE_SECRET</span></code> environment variable.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">cookie</span><span class="o">-</span><span class="n">secret</span><span class="o">=...</span>

<span class="n">PANEL_COOKIE_SECRET</span><span class="o">=...</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="encryption">
<h3>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h3>
<p>The architecture of the Bokeh/Panel server means that credentials stored as cookies can be leak in a number of ways. On the initial HTTP(S) request the server will respond with the HTML document that renders the application and this will include an unencrypted token containing the OAuth information. To ensure that the user information and access token are properly encrypted we rely on the Fernet encryption in the <code class="docutils literal notranslate"><span class="pre">cryptography</span></code> library. You can install it with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cryptography</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">cryptography</span></code>.</p>
<p>Once installed you will be able to generate a encryption key with <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">oauth-secret</span></code>. This will generate a secret you can pass to the <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> CLI command using the <code class="docutils literal notranslate"><span class="pre">--oauth-encryption-key</span></code> argument or <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_ENCRYPTION</span></code> environment variable.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">encryption</span><span class="o">-</span><span class="n">key</span><span class="o">=...</span>

<span class="n">PANEL_OAUTH_ENCRYPTION</span><span class="o">=...</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="redirect-uri">
<h3>Redirect URI<a class="headerlink" href="#redirect-uri" title="Permalink to this headline">¶</a></h3>
<p>Once the OAuth provider has authenticated a user it has to redirect them back to the application, this is what is known as the redirect URI. For security reasons this has to match the URL registered with the OAuth provider exactly. By default Panel will redirect the user straight back to the original URL of your app, e.g. when you’re hosting your app at <code class="docutils literal notranslate"><span class="pre">https://myapp.myprovider.com</span></code> Panel will use that as the redirect URI. However in certain scenarios you may override this to provide a specific redirect URI. This can be achieved with the <code class="docutils literal notranslate"><span class="pre">--oauth-redirect-uri</span></code> CLI argument or the <code class="docutils literal notranslate"><span class="pre">PANEL_OAUTH_REDIRECT_URI</span></code> environment variable.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">redirect</span><span class="o">-</span><span class="n">uri</span><span class="o">=...</span>

<span class="n">PANEL_OAUTH_REDIRECT_URI</span><span class="o">=...</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p>A fully configured OAuth configuration may look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>panel serve oauth_example.py --oauth-provider=github --oauth-key=... --oauth-secret=... --cookie-secret=... --oauth-encryption-key=...

PANEL_OAUTH_PROVIDER=... PANEL_OAUTH_KEY=... PANEL_OAUTH_SECRET=... PANEL_COOKIE_SECRET=... PANEL_OAUTH_ENCRYPTION=... panel serve oauth_example.py ...`
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-oauth-information">
<h2>Accessing OAuth information<a class="headerlink" href="#accessing-oauth-information" title="Permalink to this headline">¶</a></h2>
<p>Once a user is authorized with the chosen OAuth provider certain user information and an <code class="docutils literal notranslate"><span class="pre">access_token</span></code> will be available to be used in the application to customize the user experience. Like all other global state this may be accessed on the <code class="docutils literal notranslate"><span class="pre">pn.state</span></code> object, specifically it makes three attributes available:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pn.state.user</span></code></strong>: A unique name, email or ID that identifies the user.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pn.state.access_token</span></code></strong>: The access token issued by the OAuth provider to authorize requests to its APIs.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pn.state.user_info</span></code></strong>: Additional user information provided by the OAuth provider. This may include names, email, APIs to request further user information, IDs and more.</p></li>
</ul>
</div>
<div class="section" id="oauth-providers">
<h2>OAuth Providers<a class="headerlink" href="#oauth-providers" title="Permalink to this headline">¶</a></h2>
<p>Panel provides a  number of inbuilt OAuth providers, below is the list</p>
<div class="section" id="azure-active-directory">
<h3><strong>Azure Active Directory</strong><a class="headerlink" href="#azure-active-directory" title="Permalink to this headline">¶</a></h3>
<p>To set up OAuth2.0 authentication for Azure Active directory follow <a class="reference external" href="https://docs.microsoft.com/en-us/azure/api-management/api-management-howto-protect-backend-with-aad">these instructions</a>. In addition to the <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> ensure that you also supply the tenant ID using <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code>, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_test</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">oauth</span><span class="o">-</span><span class="n">extra</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="s2">"{'tenant': '...'}"</span>

<span class="n">PANEL_OAUTH_EXTRA_PARAMS</span><span class="o">=</span><span class="s2">"{'tenant': '...'}"</span> <span class="n">panel</span> <span class="n">serve</span> <span class="n">oauth_example</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="bitbucket">
<h3><strong>Bitbucket</strong><a class="headerlink" href="#bitbucket" title="Permalink to this headline">¶</a></h3>
<p>Bitbucket provides instructions about setting <a class="reference external" href="https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud/">setting up an OAuth consumer</a>. Follow these and then supply the <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> to Panel as described above.</p>
</div>
<div class="section" id="github">
<h3><strong>GitHub</strong><a class="headerlink" href="#github" title="Permalink to this headline">¶</a></h3>
<p>GitHub provides detailed instructions on <a class="reference external" href="https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app/">creating an OAuth app</a>. Follow these and then supply the <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> to Panel as described above.</p>
</div>
<div class="section" id="gitlab">
<h3><strong>GitLab</strong><a class="headerlink" href="#gitlab" title="Permalink to this headline">¶</a></h3>
<p>GitLab provides a detailed guide on <a class="reference external" href="https://docs.gitlab.com/ee/api/oauth2.html">configuring an OAuth</a> application. In addition to the <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> you will also have to supply a custom url using the <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code> if you have a custom GitLab instance (the default <code class="docutils literal notranslate"><span class="pre">oauth_extra_params={'url':</span> <span class="pre">'gitlab.com'}</span></code>).</p>
</div>
<div class="section" id="google">
<h3><strong>Google</strong><a class="headerlink" href="#google" title="Permalink to this headline">¶</a></h3>
<p>Google provides a guide about <a class="reference external" href="https://developers.google.com/identity/protocols/oauth2/native-app">configuring a OAuth application</a>. By default nothing except the <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> are required but to access Google services you may also want to override the default <code class="docutils literal notranslate"><span class="pre">scope</span></code> via the <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code>.</p>
</div>
<div class="section" id="okta">
<h3><strong>Okta</strong><a class="headerlink" href="#okta" title="Permalink to this headline">¶</a></h3>
<p>Okta provides a guide about <a class="reference external" href="https://developer.okta.com/docs/concepts/oauth-openid/">configuring OAuth2</a>. You must provide an <code class="docutils literal notranslate"><span class="pre">oauth_key</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth_secret</span></code> but in most other ordinary setups you will also have to provide a <code class="docutils literal notranslate"><span class="pre">url</span></code> via the <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code> and if you have set up a custom authentication server (i.e. not ‘default’) with Okta you must also provide ‘server’, the <code class="docutils literal notranslate"><span class="pre">oauth_extra_params</span></code> should then look something like this: <code class="docutils literal notranslate"><span class="pre">{'server':</span> <span class="pre">'custom',</span> <span class="pre">'url':</span> <span class="pre">'dev-***.okta.com'}</span></code></p>
</div>
<div class="section" id="plugins">
<h3>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h3>
<p>The Panel OAuth providers are pluggable, in other words downstream libraries may define their own Tornado <code class="docutils literal notranslate"><span class="pre">RequestHandler</span></code> to be used with Panel. To register such a component the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> of the downstream package should register an entry_point that Panel can discover. To read more about entry points see the <a class="reference external" href="https://packaging.python.org/specifications/entry-points/">Python documentation</a>. A custom OAuth request handler in your library may be registered as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">'panel.auth'</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"custom = my_library.auth:MyCustomOAuthRequestHandler"</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div id="scroller-right">This web page was generated from a Jupyter notebook and not all interactivity will work on this website. <a href="https://raw.githubusercontent.com/holoviz/panel/master/examples/user_guide/Authentication.ipynb">Right click to download and run locally</a> for full Python-backed interactivity.</div><hr class="docutils"/>
<p><a class="reference external" href="https://raw.githubusercontent.com/holoviz/panel/master/examples/user_guide/Authentication.ipynb">Right click to download this notebook from GitHub.</a></p>
</div>
</div>
<div class="prev-next-bottom">
<a class="left-prev" href="Async_and_Concurrency.html" id="prev-link" title="previous page">Async and Concurrency</a>
<a class="right-next" href="Django_Apps.html" id="next-link" title="next page">Django Apps</a>
</div>
</main>
</div>
</div>
<script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<div class="footer-item">
<p class="copyright">
    © Copyright 2019-2021 Panel contributors.<br/>
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br/>
</p>
</div>
</div>
</footer>
</body>
</html>