
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Deploy and Export — Panel 0.12.0 documentation</title>
<link href="../_static/css/theme.css" rel="stylesheet"/>
<link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet"/>
<link href="../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../_static/basic.css" rel="stylesheet" type="text/css">
<link href="../_static/togglebutton.css" rel="stylesheet" type="text/css">
<link href="../_static/mystnb.css" rel="stylesheet" type="text/css"/>
<link href="../_static/graphviz.css" rel="stylesheet" type="text/css"/>
<link href="../_static/nbsite.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js" rel="preload"/>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/togglebutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
<link href="../_static/favicon.ico" rel="shortcut icon">
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="Interact.html" rel="next" title="Interact"/>
<link href="Customization.html" rel="prev" title="Customization"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
</link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>
<nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-top bd-navbar" id="navbar-main"><div class="container-xl">
<div id="navbar-start">
<a class="navbar-brand" href="../index.html">
<img alt="logo" class="logo" src="../_static/logo_horizontal.png"/>
</a>
</div>
<button aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar-collapsible" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="col-lg-9 collapse navbar-collapse" id="navbar-collapsible">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../getting_started/index.html">
  Getting Started
 </a>
</li>
<li class="toctree-l1 current active nav-item">
<a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../gallery/index.html">
  Gallery
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../reference/index.html">
  Reference Gallery
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../developer_guide/index.html">
  Developers
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../api/index.html">
  API
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../releases.html">
  Releases
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../FAQ.html">
  FAQ
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../about/index.html">
  About
 </a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/holoviz/panel" rel="noopener" target="_blank" title="GitHub">
<span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://twitter.com/Panel_Org" rel="noopener" target="_blank" title="Twitter">
<span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://discourse.holoviz.org/" rel="noopener" target="_blank" title="Discourse">
<span><i class="fab fa-discourse"></i></span>
<label class="sr-only">Discourse</label>
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<div class="container-xl">
<div class="row">
<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="col-12 col-md-2 bd-sidebar"><form action="../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form><nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item active">
<ul class="current nav bd-sidenav">
<li class="toctree-l1">
<a class="reference internal" href="Overview.html">
   Overview
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Components.html">
   Components
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="APIs.html">
   APIs
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Customization.html">
   Customization
  </a>
</li>
<li class="toctree-l1 current active">
<a class="current reference internal" href="#">
   Deploy &amp; Export
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Interact.html">
   Interact
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Widgets.html">
   Widgets
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Param.html">
   Parameters
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Links.html">
   Linking
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Pipelines.html">
   Pipelines
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Templates.html">
   Templates
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Server_Deployment.html">
   Server Deployment
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Custom_Components.html">
   Building Custom Components
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Async_and_Concurrency.html">
   Asynchronous and Concurrent Process
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Authentication.html">
   Authentication
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="Django_Apps.html">
   Django Apps
  </a>
</li>
</ul>
</div>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 bd-toc">
<div class="toc-item">
<div class="tocsection onthispage pt-5 pb-3">
<i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#configuring-output">
   Configuring output
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#optional-dependencies">
     Optional dependencies
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#initializing-js-and-css">
     Initializing JS and CSS
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#display-in-the-notebook">
   Display in the notebook
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#the-repr">
     The repr
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#the-display-function">
     The
     <code class="docutils literal notranslate">
<span class="pre">
       display
      </span>
</code>
     function
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#inline-apps">
     Inline apps
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#ipywidgets">
     ipywidgets
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#display-in-the-python-repl">
     Display in the Python REPL
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#serving-multiple-apps">
     Serving multiple apps
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#launching-a-server-on-the-commandline">
   Launching a server on the commandline
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#static-file-hosting">
   Static file hosting
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#accessing-session-state">
   Accessing session state
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#document">
     Document
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#request-arguments">
     Request arguments
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#cookies">
     Cookies
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#headers">
     Headers
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#location">
     Location
    </a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#core">
       Core
      </a>
</li>
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#readonly">
       Readonly
      </a>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#pn-state-busy">
     pn.state.busy
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#pn-state-onload">
     pn.state.onload
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#scheduling-callbacks">
   Scheduling callbacks
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#server-callbacks">
     Server callbacks
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#periodic-callbacks">
     Periodic callbacks
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#accessing-the-bokeh-model">
   Accessing the Bokeh model
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#embedding">
   Embedding
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#saving">
   Saving
  </a>
</li>
</ul>
</nav>
</div>
<div class="toc-item">
</div>
<a href="https://mybinder.org/v2/gh/holoviz/panel/master?urlpath=lab/tree/examples/user_guide/Deploy_and_Export">Open this example in Binder</a>
</div>
<main class="col-12 col-md-10 col-xl-8 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
<div>
<div class="section" id="deploy-and-export">
<h1>Deploy and Export<a class="headerlink" href="#deploy-and-export" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">panel</span> <span class="k">as</span> <span class="nn">pn</span>

<span class="n">pn</span><span class="o">.</span><span class="n">extension</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, js_modules, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];
    if (js_modules == null) js_modules = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls.length === 0 && js_modules.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error() {
      console.error("failed to load " + url);
    }

    for (var i = 0; i < css_urls.length; i++) {
      var url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    var skip = [];
    if (window.requirejs) {
      window.requirejs.config({'paths': {}, 'shim': {}});
      
    }
    for (var i = 0; i < js_urls.length; i++) {
      var url = js_urls[i];
      if (skip.indexOf(url) >= 0) { on_load(); continue; }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (var i = 0; i < js_modules.length; i++) {
      var url = js_modules[i];
      if (skip.indexOf(url) >= 0) { on_load(); continue; }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    if (!js_urls.length && !js_modules.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  var js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-2.3.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.3.min.js", "https://unpkg.com/@holoviz/panel@0.12.0/dist/panel.min.js"];
  var js_modules = [];
  var css_urls = ["https://unpkg.com/@holoviz/panel@0.12.0/dist/css/markdown.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/json.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/loading.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/dataframe.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/card.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/alerts.css", "https://unpkg.com/@holoviz/panel@0.12.0/dist/css/widgets.css"];
  var inline_js = [
    function(Bokeh) {
      inject_raw_css("\n    .bk.pn-loading.arcs:before {\n      background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiBub25lOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4gIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjMyIiBzdHJva2Utd2lkdGg9IjgiIHN0cm9rZT0iI2MzYzNjMyIgc3Ryb2tlLWRhc2hhcnJheT0iNTAuMjY1NDgyNDU3NDM2NjkgNTAuMjY1NDgyNDU3NDM2NjkiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+ICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxcyIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOzM2MCA1MCA1MCI+PC9hbmltYXRlVHJhbnNmb3JtPiAgPC9jaXJjbGU+PC9zdmc+\")\n    }\n    ");
    },
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (var i = 0; i < inline_js.length; i++) {
        inline_js[i].call(root, root.Bokeh);
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, js_modules, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));</script><script type="application/javascript">
if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            console.log(message)
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        comm.open();
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        }) 
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}
</script></div>
</div>
<p>One of the main design goals for Panel was that it should make it possible to seamlessly transition back and forth between interactively prototyping a dashboard in the notebook or on the commandline to deploying it as a standalone server app. This section shows how to display panels interactively, embed static output, save a snapshot, and deploy as a separate web-server app. For more information about deploying Panel apps to various cloud providers see the <a class="reference internal" href="Server_Deployment.html"><span class="doc std std-doc">Server Deployment</span></a> documentation.</p>
<div class="section" id="configuring-output">
<h2>Configuring output<a class="headerlink" href="#configuring-output" title="Permalink to this headline">¶</a></h2>
<p>As you may have noticed, almost all the Panel documentation is written using notebooks. Panel objects display themselves automatically in a notebook and take advantage of Jupyter Comms to support communication between the rendered app and the Jupyter kernel that backs it on the Python end. To display a Panel object in the notebook is as simple as putting it on the end of a cell. Note, however, that the <code class="docutils literal notranslate"><span class="pre">panel.extension</span></code> first has to be loaded to initialize the required JavaScript in the notebook context. In recent versions of JupyterLab this works out of the box but for older versions (<code class="docutils literal notranslate"><span class="pre">&lt;3.0</span></code>) the PyViz labextension has to be installed with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>jupyter labextension install @pyviz/jupyterlab_pyviz
</pre></div>
</div>
<div class="section" id="optional-dependencies">
<h3>Optional dependencies<a class="headerlink" href="#optional-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Also remember that in order to use certain components such as Vega, LaTeX, and Plotly plots in a notebook, the models must be loaded using the extension. If you forget to load the extension, you should get a warning reminding you to do it. To load certain JS components, simply list them as part of the call to <code class="docutils literal notranslate"><span class="pre">pn.extension</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pn.extension('vega', 'katex')
</pre></div>
</div>
<p>Here we’ve ensured that the Vega and LaTeX JS dependencies will be loaded.</p>
</div>
<div class="section" id="initializing-js-and-css">
<h3>Initializing JS and CSS<a class="headerlink" href="#initializing-js-and-css" title="Permalink to this headline">¶</a></h3>
<p>Additionally, any external <code class="docutils literal notranslate"><span class="pre">css_files</span></code>, <code class="docutils literal notranslate"><span class="pre">js_files</span></code> and <code class="docutils literal notranslate"><span class="pre">raw_css</span></code> needed should be declared in the extension. The <code class="docutils literal notranslate"><span class="pre">js_files</span></code> should be declared as a dictionary mapping from the exported JS module name to the URL containing the JS components, while the <code class="docutils literal notranslate"><span class="pre">css_files</span></code> can be defined as a list:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pn.extension(js_files={'deck': https://unpkg.com/deck.gl@~5.2.0/deckgl.min.js},
             css_files=['https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css'])
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">raw_css</span></code> argument allows defining a list of strings containing CSS to publish as part of the notebook and app.</p>
<p>Providing keyword arguments via the <code class="docutils literal notranslate"><span class="pre">extension</span></code> is the same as setting them on <code class="docutils literal notranslate"><span class="pre">pn.config</span></code>, which is the preferred approach outside the notebook. <code class="docutils literal notranslate"><span class="pre">js_files</span></code> and <code class="docutils literal notranslate"><span class="pre">css_files</span></code> may be set to your chosen values as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pn.config.js_files  = {'deck': 'https://unpkg.com/deck.gl@~5.2.0/deckgl.min.js'}
pn.config.css_files = ['https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css']
</pre></div>
</div>
</div>
</div>
<div class="section" id="display-in-the-notebook">
<h2>Display in the notebook<a class="headerlink" href="#display-in-the-notebook" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-repr">
<h3>The repr<a class="headerlink" href="#the-repr" title="Permalink to this headline">¶</a></h3>
<p>Once the extension is loaded, Panel objects will display themselves if placed at the end of cell in the notebook:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pane</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">panel</span><span class="p">(</span><span class="s1">'&lt;marquee&gt;Here is some custom HTML&lt;/marquee&gt;'</span><span class="p">)</span>

<span class="n">pane</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1002">
<div class="bk-root" data-root-id="1002" id="735e8049-b405-486f-a1d5-afa514480d68"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"de9d58a4-9931-4aee-b103-1600c17a314c":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"client_comm_id":"bb8ef6579e9d46d38cc6292957d7c257","comm_id":"5f6eef735437463d938ea17f7e56a2f2","plot_id":"1002"},"id":"1003","type":"panel.models.comm_manager.CommManager"},{"attributes":{"css_classes":["markdown"],"margin":[5,5,5,5],"name":"Markdown02973","text":"&lt;p&gt;&lt;marquee&gt;Here is some custom HTML&lt;/marquee&gt;&lt;/p&gt;"},"id":"1002","type":"panel.models.markup.HTML"},{"attributes":{"reload":false},"id":"1004","type":"panel.models.location.Location"}],"root_ids":["1002","1003","1004"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"de9d58a4-9931-4aee-b103-1600c17a314c","root_ids":["1002"],"roots":{"1002":"735e8049-b405-486f-a1d5-afa514480d68"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>To instead see a textual representation of the component, you can use the <code class="docutils literal notranslate"><span class="pre">pprint</span></code> method on any Panel object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pane</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Markdown(str)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-display-function">
<h3>The <code class="docutils literal notranslate"><span class="pre">display</span></code> function<a class="headerlink" href="#the-display-function" title="Permalink to this headline">¶</a></h3>
<p>To avoid having to put a Panel on the last line of a notebook cell, e.g. to display it from inside a function call, you can use the IPython built-in <code class="docutils literal notranslate"><span class="pre">display</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">display_marquee</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">display</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">panel</span><span class="p">(</span><span class="s1">'&lt;marquee&gt;</span><span class="si">{text}</span><span class="s1">&lt;/marquee&gt;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)))</span>
    
<span class="n">display_marquee</span><span class="p">(</span><span class="s1">'This Panel was displayed from within a function'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1005">
<div class="bk-root" data-root-id="1005" id="767222b0-b374-4126-a600-65c06907bf5e"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"a2699e44-93ea-4178-9fcb-2bcf6c59f6a4":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"client_comm_id":"8759be174bf1444eb2c04fd7e6688f23","comm_id":"25ef5247d70048f8bae8ce308a5d2a37","plot_id":"1005"},"id":"1006","type":"panel.models.comm_manager.CommManager"},{"attributes":{"css_classes":["markdown"],"margin":[5,5,5,5],"name":"Markdown02978","text":"&lt;p&gt;&lt;marquee&gt;This Panel was displayed from within a function&lt;/marquee&gt;&lt;/p&gt;"},"id":"1005","type":"panel.models.markup.HTML"}],"root_ids":["1005","1006"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"a2699e44-93ea-4178-9fcb-2bcf6c59f6a4","root_ids":["1005"],"roots":{"1005":"767222b0-b374-4126-a600-65c06907bf5e"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
</div>
<div class="section" id="inline-apps">
<h3>Inline apps<a class="headerlink" href="#inline-apps" title="Permalink to this headline">¶</a></h3>
<p>Lastly it is also possible to display a Panel object as a Bokeh server app inside the notebook.  To do so call the <code class="docutils literal notranslate"><span class="pre">.app</span></code> method on the Panel object and provide the URL of your notebook server:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pane</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="s1">'localhost:8888'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<script id="1007">
  var xhr = new XMLHttpRequest()
  xhr.responseType = 'blob';
  xhr.open('GET', "http://localhost:33963/autoload.js?bokeh-autoload-element=1007&bokeh-absolute-url=http://localhost:33963&resources=none", true);

  xhr.onload = function (event) {
    var script = document.createElement('script'),
    src = URL.createObjectURL(event.target.response);
    script.src = src;
    document.body.appendChild(script);
  };
xhr.send();
</script></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;bokeh.server.server.Server at 0x7fcc8d36e1d0&gt;
</pre></div>
</div>
</div>
</div>
<p>The app will now run on a Bokeh server instance separate from the Jupyter notebook kernel, allowing you to quickly test that all the functionality of your app works both in a notebook and in a server context.</p>
</div>
<div class="section" id="ipywidgets">
<h3>ipywidgets<a class="headerlink" href="#ipywidgets" title="Permalink to this headline">¶</a></h3>
<p>If the <code class="docutils literal notranslate"><span class="pre">jupyter_bokeh</span></code> package is installed it is also possible to render Panel objects as an ipywidget rather than using Bokeh’s internal communication mechanisms.  You can enable ipywidgets support  globally using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pn</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="n">comms</span><span class="o">=</span><span class="s1">'ipywidgets'</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">pn</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">comms</span> <span class="o">=</span> <span class="s1">'ipywidgets'</span>
</pre></div>
</div>
<p>This global setting can be useful when trying to serve an entire notebook using <a class="reference external" href="https://github.com/voila-dashboards/voila">Voilà</a>. Alternatively, we can convert individual objects to an ipywidget one at a time using the <code class="docutils literal notranslate"><span class="pre">pn.ipywidget()</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipywidget</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">ipywidget</span><span class="p">(</span><span class="n">pane</span><span class="p">)</span>
<span class="n">ipywidget</span>
</pre></div>
</div>
<p>This approach also allows combining a Panel object with any other Jupyter-widget–based model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">Accordion</span>
<span class="n">Accordion</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">pn</span><span class="o">.</span><span class="n">ipywidget</span><span class="p">(</span><span class="n">pane</span><span class="p">)])</span>
</pre></div>
</div>
<p>To use Panel’s ipywidgets support in JupyterLab, the following extensions have to be installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="nd">@jupyter</span><span class="o">-</span><span class="n">widgets</span><span class="o">/</span><span class="n">jupyterlab</span><span class="o">-</span><span class="n">manager</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="nd">@bokeh</span><span class="o">/</span><span class="n">jupyter_bokeh</span>
</pre></div>
</div>
<p>Additionally the <code class="docutils literal notranslate"><span class="pre">jupyter_bokeh</span></code> package should be installed using either pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">jupyter_bokeh</span>
</pre></div>
</div>
<p>or using conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">bokeh</span> <span class="n">jupyter_bokeh</span>
</pre></div>
</div>
</div>
<div class="section" id="display-in-the-python-repl">
<h3>Display in the Python REPL<a class="headerlink" href="#display-in-the-python-repl" title="Permalink to this headline">¶</a></h3>
<p>Working from the command line will not automatically display rich representations inline as in a notebook, but you can still interact with your Panel components if you start a Bokeh server instance and open a separate browser window using the <code class="docutils literal notranslate"><span class="pre">show</span></code> method. The method has the following arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>port: int (optional)
   Allows specifying a specific port (default=0 chooses an arbitrary open port)
websocket_origin: str or list(str) (optional)
   A list of hosts that can connect to the websocket.
   This is typically required when embedding a server app in
   an external-facing web site.
   If None, "localhost" is used.
threaded: boolean (optional, default=False)
   Whether to launch the Server on a separate thread, allowing
   interactive use.
title : str
   A string title to give the Document (if served as an app)
**kwargs : dict
   Additional keyword arguments passed to the bokeh.server.server.Server instance.
</pre></div>
</div>
<p>To work with an app completely interactively you can set <code class="docutils literal notranslate"><span class="pre">threaded=True</span></code> which will launch the server on a separate thread and let you interactively play with the app.</p>
<p><img src="https://assets.holoviews.org/panel/gifs/commandline_show.gif"/></p>
<p>The <code class="docutils literal notranslate"><span class="pre">.show</span></code> call will return either a Bokeh server instance (if <code class="docutils literal notranslate"><span class="pre">threaded=False</span></code>) or a <code class="docutils literal notranslate"><span class="pre">StoppableThread</span></code> instance (if <code class="docutils literal notranslate"><span class="pre">threaded=True</span></code>) which both provide a <code class="docutils literal notranslate"><span class="pre">stop</span></code> method to stop the server instance.</p>
</div>
<div class="section" id="serving-multiple-apps">
<h3>Serving multiple apps<a class="headerlink" href="#serving-multiple-apps" title="Permalink to this headline">¶</a></h3>
<p>If you want to serve more than one app on a single server you can use the <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> function. By supplying a dictionary where the keys represent the URL slugs and the values must be either Panel objects or functions returning Panel objects you can easily launch a server with a number of apps, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pn</span><span class="o">.</span><span class="n">serve</span><span class="p">({</span><span class="s1">'markdown'</span><span class="p">:</span> <span class="s1">'# This is a Panel app'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">:</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">JSON</span><span class="p">({</span><span class="s1">'abc'</span><span class="p">:</span> <span class="mi">123</span><span class="p">})})</span>
</pre></div>
</div>
<p>You can customize the HTML title of each application by supplying a dictionary where the keys represent the URL slugs and the values represent the titles, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pn</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">'markdown'</span><span class="p">:</span> <span class="s1">'# This is a Panel app'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">:</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">JSON</span><span class="p">({</span><span class="s1">'abc'</span><span class="p">:</span> <span class="mi">123</span><span class="p">})},</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s1">'markdown'</span><span class="p">:</span> <span class="s1">'A Markdown App'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">:</span> <span class="s1">'A JSON App'</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> accepts a number of arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>panel: Viewable, function or {str: Viewable or function}
  A Panel object, a function returning a Panel object or a
  dictionary mapping from the URL slug to either.
port: int (optional, default=0)
  Allows specifying a specific port
address: str
  The address the server should listen on for HTTP requests.
websocket_origin: str or list(str) (optional)
  A list of hosts that can connect to the websocket.

  This is typically required when embedding a server app in
  an external web site.

  If None, "localhost" is used.
loop: tornado.ioloop.IOLoop (optional, default=IOLoop.current())
  The tornado IOLoop to run the Server on
show: boolean (optional, default=False)
  Whether to open the server in a new browser tab on start
start: boolean(optional, default=False)
  Whether to start the Server
title: str or {str: str} (optional, default=None)
  An HTML title for the application or a dictionary mapping
  from the URL slug to a customized title
verbose: boolean (optional, default=True)
  Whether to print the address and port
location: boolean or panel.io.location.Location
  Whether to create a Location component to observe and
  set the URL location.
kwargs: dict
  Additional keyword arguments to pass to Server instance
</pre></div>
</div>
</div>
</div>
<div class="section" id="launching-a-server-on-the-commandline">
<h2>Launching a server on the commandline<a class="headerlink" href="#launching-a-server-on-the-commandline" title="Permalink to this headline">¶</a></h2>
<p>Once the app is ready for deployment it can be served using the Bokeh server.  For a detailed breakdown of the design and functionality of Bokeh server, see the <a class="reference external" href="https://bokeh.pydata.org/en/latest/docs/user_guide/server.html">Bokeh documentation</a>. The most important thing to know is that Panel (and Bokeh) provide a CLI command to serve a Python script, app directory, or Jupyter notebook containing a Bokeh or Panel app. To launch a server using the CLI, simply run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>panel serve app.ipynb
</pre></div>
</div>
<p>Alternatively you can also list multiple apps:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>panel serve app1.py app2.ipynb
</pre></div>
</div>
<p>or even serve a number of apps at once:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>panel serve apps/*.py
</pre></div>
</div>
<p>For development it can be particularly helpful to use the <code class="docutils literal notranslate"><span class="pre">--autoreload</span></code> option to <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> as that will automatically reload the page whenever the application code or any of its imports change.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> command has the following options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>positional arguments:
  DIRECTORY-OR-SCRIPT   The app directories or scripts or notebooks to serve 
                        (serve empty document if not specified)

optional arguments:
  -h, --help            show this help message and exit
  --port PORT           Port to listen on
  --address ADDRESS     Address to listen on
  --log-level LOG-LEVEL
                        One of: trace, debug, info, warning, error or critical
  --log-format LOG-FORMAT
                        A standard Python logging format string (default:
                        '%(asctime)s %(message)s')
  --log-file LOG-FILE   A filename to write logs to, or None to write to the
                        standard stream (default: None)
  --args ...            Any command line arguments remaining are passed on to
                        the application handler
  --show                Open server app(s) in a browser
  --allow-websocket-origin HOST[:PORT]
                        Public hostnames which may connect to the Bokeh
                        websocket
  --prefix PREFIX       URL prefix for Bokeh server URLs
  --keep-alive MILLISECONDS
                        How often to send a keep-alive ping to clients, 0 to
                        disable.
  --check-unused-sessions MILLISECONDS
                        How often to check for unused sessions
  --unused-session-lifetime MILLISECONDS
                        How long unused sessions last
  --stats-log-frequency MILLISECONDS
                        How often to log stats
  --mem-log-frequency MILLISECONDS
                        How often to log memory usage information
  --use-xheaders        Prefer X-headers for IP/protocol information
  --auth-module AUTH_MODULE
                        Absolute path to a Python module that implements auth hooks
  --enable-xsrf-cookies
                        Whether to enable Tornado support for XSRF cookies.
                        All PUT, POST, or DELETE handlers must be properly
                        instrumented when this setting is enabled.
  --exclude-headers EXCLUDE_HEADERS [EXCLUDE_HEADERS ...]
                        A list of request headers to exclude from the session
                        context (by default all headers are included).
  --exclude-cookies EXCLUDE_COOKIES [EXCLUDE_COOKIES ...]
                        A list of request cookies to exclude from the session
                        context (by default all cookies are included).
  --include-headers INCLUDE_HEADERS [INCLUDE_HEADERS ...]
                        A list of request headers to make available in the
                        session context (by default all headers are included).
  --include-cookies INCLUDE_COOKIES [INCLUDE_COOKIES ...]
                        A list of request cookies to make available in the
                        session context (by default all cookies are included).
  --session-ids MODE    One of: unsigned, signed, or external-signed
  --index INDEX         Path to a template to use for the site index
  --disable-index       Do not use the default index on the root path
  --disable-index-redirect
                        Do not redirect to running app from root path
  --default-app FILENAME
                        The app to redirect to from the root. When enabled
                        no index is served.
  --num-procs N         Number of worker processes for an app. Using 0 will
                        autodetect number of cores (defaults to 1)
  --warm                Whether to execute scripts on startup to warm up the server.
  --autoreload
                        Whether to automatically reload user sessions when the application or any of its imports change.
  --static-dirs KEY=VALUE [KEY=VALUE ...]        
                        Static directories to serve specified as key=value
                        pairs mapping from URL route to static file directory.

  --dev [FILES-TO-WATCH [FILES-TO-WATCH ...]]
                        Enable live reloading during app development.By
                        default it watches all *.py *.html *.css *.yaml
                        filesin the app directory tree. Additional files can
                        be passedas arguments. NOTE: This setting only works
                        with a single app.It also restricts the number of
                        processes to 1.
  --session-token-expiration N
                        Duration in seconds that a new session token is valid
                        for session creation. After the expiry time has elapsed,
                        the token will not be able create a new session
                        (defaults to seconds).
  --websocket-max-message-size BYTES
                        Set the Tornado websocket_max_message_size value
                        (defaults to 20MB) NOTE: This setting has effect ONLY
                        for Tornado&gt;=4.5
  --websocket-compression-level LEVEL
                        Set the Tornado WebSocket compression_level
  --websocket-compression-mem-level LEVEL
                        Set the Tornado WebSocket compression mem_level
  --oauth-provider OAUTH_PROVIDER
                        The OAuth2 provider to use.
  --oauth-key OAUTH_KEY
                        The OAuth2 key to use
  --oauth-secret OAUTH_SECRET
                        The OAuth2 secret to use
  --oauth-redirect-uri OAUTH_REDIRECT_URI
                        The OAuth2 redirect URI
  --oauth-extra-params OAUTH_EXTRA_PARAMS
                        Additional parameters to use.
  --oauth-jwt-user OAUTH_JWT_USER
                        The key in the ID JWT token to consider the user.
  --oauth-encryption-key OAUTH_ENCRYPTION_KEY
                        A random string used to encode the user information.
  --rest-provider REST_PROVIDER
                        The interface to use to serve REST API
  --rest-endpoint REST_ENDPOINT
                        Endpoint to store REST API on.
  --rest-session-info   
                        Whether to serve session info on the REST API
  --session-history SESSION_HISTORY
                        The length of the session history to record.
</pre></div>
</div>
<p>To turn a notebook into a deployable app simply append <code class="docutils literal notranslate"><span class="pre">.servable()</span></code> to one or more Panel objects, which will add the app to Bokeh’s <code class="docutils literal notranslate"><span class="pre">curdoc</span></code>, ensuring it can be discovered by Bokeh server on deployment. In this way it is trivial to build dashboards that can be used interactively in a notebook and then seamlessly deployed on Bokeh server.</p>
<p>When called on a notebook, <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> first converts it to a python script using <a class="reference external" href="https://nbconvert.readthedocs.io/en/stable/api/exporters.html"><code class="docutils literal notranslate"><span class="pre">nbconvert.PythonExporter()</span></code></a>, albeit with <a class="reference external" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html">IPython magics</a> stripped out. This means that non-code cells, such as raw cells, are entirely handled by <code class="docutils literal notranslate"><span class="pre">nbconvert</span></code> and <a class="reference external" href="https://nbsphinx.readthedocs.io/en/latest/raw-cells.html">may modify the served app</a>.</p>
</div>
<div class="section" id="static-file-hosting">
<h2>Static file hosting<a class="headerlink" href="#static-file-hosting" title="Permalink to this headline">¶</a></h2>
<p>Whether you’re launching your application using <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> from the commandline or using <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> in a script you can also serve static files. When using <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> you can use the <code class="docutils literal notranslate"><span class="pre">--static-dirs</span></code> argument to specify a list of static directories to serve along with their routes, e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>panel serve some_script.py --static-dirs assets=./assets
</pre></div>
</div>
<p>This will serve the <code class="docutils literal notranslate"><span class="pre">./assets</span></code> directory on the servers <code class="docutils literal notranslate"><span class="pre">/assets</span></code> route. Note however that the <code class="docutils literal notranslate"><span class="pre">/static</span></code> route is reserved internally by Panel.</p>
<p>Similarly when using <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> or <code class="docutils literal notranslate"><span class="pre">panel_obj.show</span></code> the static routes may be defined as a dictionary, e.g. the equivalent to the example would be:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pn.serve(panel_obj, static_dirs={'assets': './assets'})
</pre></div>
</div>
</div>
<div class="section" id="accessing-session-state">
<h2>Accessing session state<a class="headerlink" href="#accessing-session-state" title="Permalink to this headline">¶</a></h2>
<p>Whenever a Panel app is being served the <code class="docutils literal notranslate"><span class="pre">panel.state</span></code> object exposes some of the internal Bokeh server components to a user.</p>
<div class="section" id="document">
<h3>Document<a class="headerlink" href="#document" title="Permalink to this headline">¶</a></h3>
<p>The current Bokeh <code class="docutils literal notranslate"><span class="pre">Document</span></code> can be accessed using <code class="docutils literal notranslate"><span class="pre">panel.state.curdoc</span></code>.</p>
</div>
<div class="section" id="request-arguments">
<h3>Request arguments<a class="headerlink" href="#request-arguments" title="Permalink to this headline">¶</a></h3>
<p>When a browser makes a request to a Bokeh server a session is created for the Panel application. The request arguments are made available to be accessed on <code class="docutils literal notranslate"><span class="pre">pn.state.session_args</span></code>. For example if your application is hosted at <code class="docutils literal notranslate"><span class="pre">localhost:8001/app</span></code>, appending <code class="docutils literal notranslate"><span class="pre">?phase=0.5</span></code> to the URL will allow you to access the phase variable using the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">phase</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">session_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'phase'</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">phase</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This mechanism may be used to modify the behavior of an app dependending on parameters provided in the URL.</p>
</div>
<div class="section" id="cookies">
<h3>Cookies<a class="headerlink" href="#cookies" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">panel.state.cookies</span></code> will allow accessing the cookies stored in the browser and on the bokeh server.</p>
</div>
<div class="section" id="headers">
<h3>Headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">panel.state.headers</span></code> will allow accessing the HTTP headers stored in the browser and on the bokeh server.</p>
</div>
<div class="section" id="location">
<h3>Location<a class="headerlink" href="#location" title="Permalink to this headline">¶</a></h3>
<p>When starting a server session Panel will attach a <code class="docutils literal notranslate"><span class="pre">Location</span></code> component which can be accessed using <code class="docutils literal notranslate"><span class="pre">pn.state.location</span></code>. The <code class="docutils literal notranslate"><span class="pre">Location</span></code> component servers a number of functions:</p>
<ul class="simple">
<li><p>Navigation between pages via <code class="docutils literal notranslate"><span class="pre">pathname</span></code></p></li>
<li><p>Sharing (parts of) the page state in the url as <code class="docutils literal notranslate"><span class="pre">search</span></code> parameters for bookmarking and sharing.</p></li>
<li><p>Navigating to subsections of the page via the <code class="docutils literal notranslate"><span class="pre">hash_</span></code> parameter.</p></li>
</ul>
<div class="section" id="core">
<h4>Core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pathname</span></code></strong> (string): pathname part of the url, e.g. ‘/user_guide/Interact.html’.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">search</span></code></strong> (string): search part of the url e.g. ‘?color=blue’.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">hash_</span></code></strong> (string): hash part of the url e.g. ‘#interact’.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">reload</span></code></strong> (bool): Whether or not to reload the page when the url is updated.</p>
<ul>
<li><p>For independent apps this should be set to True.</p></li>
<li><p>For integrated or single page apps this should be set to False.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="readonly">
<h4>Readonly<a class="headerlink" href="#readonly" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">href</span></code></strong> (string): The full url, e.g. ‘https://panel.holoviz.org/user_guide/Interact.html:80?color=blue#interact’.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">protocol</span></code></strong> (string): protocol part of the url, e.g. ‘http:’ or ‘https:’</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">port</span></code></strong> (string): port number, e.g. ‘80’</p></li>
</ul>
</div>
</div>
<div class="section" id="pn-state-busy">
<h3>pn.state.busy<a class="headerlink" href="#pn-state-busy" title="Permalink to this headline">¶</a></h3>
<p>Often an application will have longer running callbacks which are being processed on the server, to give users some indication that the server is busy you may therefore have some way of indicating that busy state. The <code class="docutils literal notranslate"><span class="pre">pn.state.busy</span></code> parameter indicates whether a callback is being actively processed and may be linked to some visual indicator.</p>
<p>Below we will create a little application to demonstrate this, we will create a button which executes some longer running task on click and then create an indicator function that displays <code class="docutils literal notranslate"><span class="pre">'I'm</span> <span class="pre">busy'</span></code> when the <code class="docutils literal notranslate"><span class="pre">pn.state.busy</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">'I'm</span> <span class="pre">idle'</span></code> when it is not:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">processing</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="c1"># Some longer running task</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Click me!'</span><span class="p">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">processing</span><span class="p">)</span>

<span class="nd">@pn</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">busy</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">indicator</span><span class="p">(</span><span class="n">busy</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">"I'm busy"</span> <span class="k">if</span> <span class="n">busy</span> <span class="k">else</span> <span class="s2">"I'm idle"</span>

<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">indicator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1008">
<div class="bk-root" data-root-id="1008" id="461ab2ac-9978-473e-861b-ca903852c1ec"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"08166aa0-c54e-4d15-bfa5-498b4b721746":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"css_classes":["markdown"],"margin":[5,5,5,5],"name":"ParamFunction02983","text":"&lt;p&gt;I&amp;rsquo;m idle&lt;/p&gt;"},"id":"1011","type":"panel.models.markup.HTML"},{"attributes":{"icon":null,"label":"Click me!","margin":[5,10,5,10],"subscribed_events":["button_click"]},"id":"1009","type":"Button"},{"attributes":{"children":[{"id":"1009"},{"id":"1010"}],"margin":[0,0,0,0],"name":"Row02990"},"id":"1008","type":"Row"},{"attributes":{"client_comm_id":"f26f53af2f344a5fa5371d1c5f386788","comm_id":"1dcbfceb0a854e7784eddc1de0111603","plot_id":"1008"},"id":"1012","type":"panel.models.comm_manager.CommManager"},{"attributes":{"children":[{"id":"1011"}],"margin":[0,0,0,0],"name":"Row02987"},"id":"1010","type":"Row"}],"root_ids":["1008","1012"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"08166aa0-c54e-4d15-bfa5-498b4b721746","root_ids":["1008"],"roots":{"1008":"461ab2ac-9978-473e-861b-ca903852c1ec"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>This way we can create a global indicator for the busy state instead of modifying all our callbacks.</p>
</div>
<div class="section" id="pn-state-onload">
<h3>pn.state.onload<a class="headerlink" href="#pn-state-onload" title="Permalink to this headline">¶</a></h3>
<p>Another useful callback to define the onload callback, in a server context this will execute when a session is first initialized. Let us for example define a minimal example inside a function which we will pass to <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code>. This emulates what happens when we call <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> on the commandline. We will create a widget without populating its options, then we will add an <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback, which will set the options once the initial page is loaded. Imagine for example that we have to fetch the options from some database which might take a little while, by deferring the loading of the options to the callback we can get something on the screen as quickly as possible and only run the expensive callback when we have already rendered something for the user to look at.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Select</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_load</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Emulate some long running process</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">]</span>

    <span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">onload</span><span class="p">(</span><span class="n">on_load</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">widget</span>

<span class="c1"># pn.serve(app) </span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="scheduling-callbacks">
<h2>Scheduling callbacks<a class="headerlink" href="#scheduling-callbacks" title="Permalink to this headline">¶</a></h2>
<p>When you build an app you frequently want to schedule a callback to be run periodically to refresh the data and update visual components. Additionally if you want to update Bokeh components directly you may need to schedule a callback to get around Bokeh’s document lock to avoid errors like this:</p>
<blockquote>
<div><p>RuntimeError: _pending_writes should be non-None when we have a document lock, and we should have the lock when the document changes</p>
</div></blockquote>
<p>In this section we will discover how we can leverage Bokeh’s Document and <code class="docutils literal notranslate"><span class="pre">pn.state.add_periodic_callback</span></code> to set this up.</p>
<div class="section" id="server-callbacks">
<h3>Server callbacks<a class="headerlink" href="#server-callbacks" title="Permalink to this headline">¶</a></h3>
<p>The Bokeh server that Panel builds on is designed to be thread safe which requires a set of locks to avoid multiple threads modifying the Bokeh models simultaneously. Therefore if we want to work with Bokeh models directly we should ensure that any changes to a Bokeh model are executed on the correct thread by adding a callback, which the event loop will then execute safely.</p>
<p>In the example below we will launch an application on a thread using <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> and make the Bokeh plot (in practice you may provide handles to this object on a class). Finally we will wait 1 second until the server is launched and schedule a callback which updates the <code class="docutils literal notranslate"><span class="pre">y_range</span></code> by accessing the <code class="docutils literal notranslate"><span class="pre">Document</span></code> and calling <code class="docutils literal notranslate"><span class="pre">add_next_tick_callback</span></code> on it. This pattern will ensure that the update to the Bokeh model is executed on the correct thread:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">panel</span> <span class="k">as</span> <span class="nn">pn</span>

<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="k">global</span> <span class="n">p</span>
<span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">p</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curdoc</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">p</span>

<span class="n">pn</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">document</span><span class="o">.</span><span class="n">add_next_tick_callback</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">y_range</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="periodic-callbacks">
<h3>Periodic callbacks<a class="headerlink" href="#periodic-callbacks" title="Permalink to this headline">¶</a></h3>
<p>As we discussed above periodic callbacks allow periodically updating your application with new data. Below we will create a simple Bokeh plot and display it with Panel:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">({</span><span class="s2">"x"</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s2">"y"</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">bokeh_pane</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Bokeh</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">bokeh_pane</span><span class="o">.</span><span class="n">servable</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1050">
<div class="bk-root" data-root-id="1050" id="ff23b97b-43ca-4b1b-bdf7-1b2a5cfd9cf3"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"06620e55-f1c5-4a91-b962-d50b45f74282":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{},"id":"1034","type":"SaveTool"},{"attributes":{"overlay":{"id":"1037"}},"id":"1033","type":"BoxZoomTool"},{"attributes":{},"id":"1057","type":"AllLabels"},{"attributes":{"children":[{"id":"1014"}],"margin":[0,0,0,0],"name":"Row02994"},"id":"1050","type":"Row"},{"attributes":{"formatter":{"id":"1058"},"major_label_policy":{"id":"1057"},"ticker":{"id":"1024"}},"id":"1023","type":"LinearAxis"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1037","type":"BoxAnnotation"},{"attributes":{},"id":"1021","type":"LinearScale"},{"attributes":{},"id":"1017","type":"DataRange1d"},{"attributes":{"active_multi":null,"tools":[{"id":"1031"},{"id":"1032"},{"id":"1033"},{"id":"1034"},{"id":"1035"},{"id":"1036"}]},"id":"1038","type":"Toolbar"},{"attributes":{"axis":{"id":"1027"},"dimension":1,"ticker":null},"id":"1030","type":"Grid"},{"attributes":{"data":{"x":[0,1,2,3,4,5,6,7,8,9],"y":[0,1,2,3,4,5,6,7,8,9]},"selected":{"id":"1060"},"selection_policy":{"id":"1059"}},"id":"1013","type":"ColumnDataSource"},{"attributes":{},"id":"1058","type":"BasicTickFormatter"},{"attributes":{"axis":{"id":"1023"},"ticker":null},"id":"1026","type":"Grid"},{"attributes":{"below":[{"id":"1023"}],"center":[{"id":"1026"},{"id":"1030"}],"left":[{"id":"1027"}],"renderers":[{"id":"1048"}],"title":{"id":"1051"},"toolbar":{"id":"1038"},"x_range":{"id":"1015"},"x_scale":{"id":"1019"},"y_range":{"id":"1017"},"y_scale":{"id":"1021"}},"id":"1014","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1028","type":"BasicTicker"},{"attributes":{},"id":"1024","type":"BasicTicker"},{"attributes":{},"id":"1051","type":"Title"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"y"}},"id":"1047","type":"Line"},{"attributes":{"formatter":{"id":"1055"},"major_label_policy":{"id":"1054"},"ticker":{"id":"1028"}},"id":"1027","type":"LinearAxis"},{"attributes":{"client_comm_id":"1068597a32b5492bbe5fcae7eb9e7401","comm_id":"3ade5ee7dd534f09ab54b045b089b5ff","plot_id":"1050"},"id":"1106","type":"panel.models.comm_manager.CommManager"},{"attributes":{"source":{"id":"1013"}},"id":"1049","type":"CDSView"},{"attributes":{},"id":"1060","type":"Selection"},{"attributes":{},"id":"1059","type":"UnionRenderers"},{"attributes":{},"id":"1019","type":"LinearScale"},{"attributes":{},"id":"1031","type":"PanTool"},{"attributes":{},"id":"1015","type":"DataRange1d"},{"attributes":{"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"y"}},"id":"1046","type":"Line"},{"attributes":{},"id":"1036","type":"HelpTool"},{"attributes":{},"id":"1055","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"1013"},"glyph":{"id":"1046"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1047"},"view":{"id":"1049"}},"id":"1048","type":"GlyphRenderer"},{"attributes":{},"id":"1032","type":"WheelZoomTool"},{"attributes":{},"id":"1054","type":"AllLabels"},{"attributes":{},"id":"1035","type":"ResetTool"}],"root_ids":["1050","1106"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"06620e55-f1c5-4a91-b962-d50b45f74282","root_ids":["1050"],"roots":{"1050":"ff23b97b-43ca-4b1b-bdf7-1b2a5cfd9cf3"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>Now we will define a callback that updates the data on the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> and use the <code class="docutils literal notranslate"><span class="pre">pn.state.add_periodic_callback</span></code> method to schedule updates every 200 ms. We will also set a timeout of 5 seconds after which the callback will automatically stop.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">source</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">"y"</span><span class="p">:</span> <span class="n">data</span><span class="p">})</span>
    <span class="n">bokeh_pane</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s1">'object'</span><span class="p">)</span> <span class="c1"># Only needed in notebook</span>

<span class="n">cb</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">add_periodic_callback</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In a notebook or bokeh server context we should now see the plot update periodically. The other nice thing about this is that <code class="docutils literal notranslate"><span class="pre">pn.state.add_periodic_callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">PeriodicCallback</span></code> we can call <code class="docutils literal notranslate"><span class="pre">.stop()</span></code> and <code class="docutils literal notranslate"><span class="pre">.start()</span></code> on if we want to stop or pause the periodic execution. Additionally we can also dynamically adjust the period by setting the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> parameter to speed up or slow down the callback.</p>
<p>Other nice features on a periodic callback are the ability to check the number of executions using the <code class="docutils literal notranslate"><span class="pre">cb.counter</span></code> property and the ability to toggle the callback on and off simply by setting the running parameter. This makes it possible to link a widget to the running state:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">toggle</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Toggle</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Toggle callback'</span><span class="p">)</span>

<span class="n">toggle</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">'running'</span><span class="p">)</span>
<span class="n">toggle</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1162">
<div class="bk-root" data-root-id="1162" id="53d6f406-d5ee-413f-985f-af4533029779"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"dcea6051-fb40-4b1c-9def-2e1ae72f279d":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"icon":null,"label":"Toggle callback","margin":[5,10,5,10]},"id":"1162","type":"Toggle"},{"attributes":{"client_comm_id":"4975e9c1abef4bb8b7c85302a043705e","comm_id":"0b5f0340cdaf4bffb6e8bf3ff6a42e83","plot_id":"1162"},"id":"1163","type":"panel.models.comm_manager.CommManager"}],"root_ids":["1162","1163"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"dcea6051-fb40-4b1c-9def-2e1ae72f279d","root_ids":["1162"],"roots":{"1162":"53d6f406-d5ee-413f-985f-af4533029779"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>Note that when starting a server dynamically with <code class="docutils literal notranslate"><span class="pre">pn.serve</span></code> you cannot start a periodic callback before the application is actually being served. Therefore you should create the application and start the callback in a wrapping function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">panel</span> <span class="k">as</span> <span class="nn">pn</span>

<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">source</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">"y"</span><span class="p">:</span> <span class="n">data</span><span class="p">})</span>

<span class="k">def</span> <span class="nf">panel_app</span><span class="p">():</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">({</span><span class="s2">"x"</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s2">"y"</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">add_periodic_callback</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">source</span><span class="p">),</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Bokeh</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="n">pn</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="n">panel_app</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-the-bokeh-model">
<h2>Accessing the Bokeh model<a class="headerlink" href="#accessing-the-bokeh-model" title="Permalink to this headline">¶</a></h2>
<p>Since Panel is built on top of Bokeh, all Panel objects can easily be converted to a Bokeh model. The <code class="docutils literal notranslate"><span class="pre">get_root</span></code> method returns a model representing the contents of a Panel:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">'# Some markdown'</span><span class="p">)</span><span class="o">.</span><span class="n">get_root</span><span class="p">()</span>
<span class="n">model</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.layouts.Column">Column</b>(</div><div style="display: table-cell;">id = '1164', <span id="1167" style="cursor: pointer;">…)</span></div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">align = 'start',</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">aspect_ratio = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">background = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">children = [HTML(id='1165', ...)],</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">css_classes = [],</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">disabled = False,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">height = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">height_policy = 'auto',</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks = {},</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks = {},</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">margin = (0, 0, 0, 0),</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">max_height = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">max_width = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">min_height = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">min_width = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name = 'Column03003',</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">rows = 'auto',</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">sizing_mode = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">spacing = 0,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events = [],</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">syncable = True,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags = [],</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible = True,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">width = None,</div></div><div class="1166" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">width_policy = 'auto')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1167");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1166");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>
</div></div>
</div>
<p>By default this model will be associated with Bokeh’s <code class="docutils literal notranslate"><span class="pre">curdoc()</span></code>, so if you want to associate the model with some other <code class="docutils literal notranslate"><span class="pre">Document</span></code> ensure you supply it explictly as the first argument. Once you have access to the underlying bokeh model you can use all the usual bokeh utilities such as <code class="docutils literal notranslate"><span class="pre">components</span></code>, <code class="docutils literal notranslate"><span class="pre">file_html</span></code>, or <code class="docutils literal notranslate"><span class="pre">show</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.embed</span> <span class="kn">import</span> <span class="n">components</span><span class="p">,</span> <span class="n">file_html</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">show</span>

<span class="n">script</span><span class="p">,</span> <span class="n">html</span> <span class="o">=</span> <span class="n">components</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="embedding">
<h2>Embedding<a class="headerlink" href="#embedding" title="Permalink to this headline">¶</a></h2>
<p>Panel generally relies on either the Jupyter kernel or a Bokeh Server to be running in the background to provide interactive behavior. However for simple apps with a limited amount of state it is also possible to <code class="docutils literal notranslate"><span class="pre">embed</span></code> all the widget state, allowing the app to be used entirely from within Javascript. To demonstrate this we will create a simple app which simply takes a slider value, multiplies it by 5 and then display the result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="nd">@pn</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="n">slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">'</span><span class="si">%d</span><span class="s1"> * 5 = </span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span>

<span class="n">row</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If we displayed this the normal way it would call back into Python every time the value changed. However, the <code class="docutils literal notranslate"><span class="pre">.embed()</span></code> method will record the state of the app for the different widget configurations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1168">
<div class="bk-root" data-root-id="1168" id="810029d2-8f36-4d37-8713-09fed07be573"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"e4cdcc85-dff9-4a0f-90a3-fc4759ab5fcd":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1176"},{"id":"1177"}]},"margin":[0,10,5,10],"show_value":false,"start":0,"tooltips":false,"value":0},"id":"1175","type":"Slider"},{"attributes":{"margin":[5,0,0,10],"name":"","style":{"white-space":"nowrap"},"text":"<b>0</b>"},"id":"1174","type":"Div"},{"attributes":{"args":{"source":{"id":"1175"},"target":{"id":"1174"}},"code":"\n    var labels = ['<b>0</b>', '<b>5</b>', '<b>10</b>']\n    target.text = labels[source.value]\n    "},"id":"1176","type":"CustomJS"},{"attributes":{"state":{"0":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1171\"}, \"new\": \"&lt;p&gt;0 * 5 = 0&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1180\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"1":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1171\"}, \"new\": \"&lt;p&gt;5 * 5 = 25&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1179\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"2":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1171\"}, \"new\": \"&lt;p&gt;10 * 5 = 50&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1178\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"}},"values":[0],"widgets":{"1175":0}},"id":"1172","type":"panel.models.state.State"},{"attributes":{"css_classes":["markdown"],"margin":[5,5,5,5],"name":"ParamFunction03005","text":"&lt;p&gt;0 * 5 = 0&lt;/p&gt;"},"id":"1171","type":"panel.models.markup.HTML"},{"attributes":{"children":[{"id":"1171"}],"margin":[0,0,0,0],"name":"Row03009"},"id":"1170","type":"Row"},{"attributes":{"code":"\nvar state = null\nfor (var root of cb_obj.document.roots()) {\n  if (root.id == '1172') {\n    state = root;\n    break;\n  }\n}\nif (!state) { return; }\nstate.set_state(cb_obj, cb_obj.value)\n"},"id":"1177","type":"CustomJS"},{"attributes":{"children":[{"id":"1173"},{"id":"1170"}],"margin":[0,0,0,0],"name":"Row03012","tags":["embedded"]},"id":"1168","type":"Row"},{"attributes":{"children":[{"id":"1174"},{"id":"1175"}],"margin":[0,0,0,0],"name":"Column03019"},"id":"1173","type":"Column"}],"root_ids":["1168","1172"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"e4cdcc85-dff9-4a0f-90a3-fc4759ab5fcd","root_ids":["1168"],"roots":{"1168":"810029d2-8f36-4d37-8713-09fed07be573"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>If you try the widget above you will note that it only has 3 different states, 0, 5 and 10. This is because by default embed will try to limit the number of options of non-discrete or semi-discrete widgets to at most three values. This can be controlled using the <code class="docutils literal notranslate"><span class="pre">max_opts</span></code> argument to the embed method or you can provide an explicit list of <code class="docutils literal notranslate"><span class="pre">states</span></code> to embed for each widget:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row</span><span class="o">.</span><span class="n">embed</span><span class="p">(</span><span class="n">states</span><span class="o">=</span><span class="p">{</span><span class="n">slider</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="1181">
<div class="bk-root" data-root-id="1181" id="23b0c213-ebef-420c-b0d4-db73a8236e07"></div>
</div>
<script type="application/javascript">(function(root) {
  function embed_document(root) {
    var docs_json = {"456a9d61-88d1-4780-9fba-9496a40e40e7":{"defs":[{"extends":null,"module":null,"name":"ReactiveHTML1","overrides":[],"properties":[]},{"extends":null,"module":null,"name":"FlexBox1","overrides":[],"properties":[{"default":"flex-start","kind":null,"name":"align_content"},{"default":"flex-start","kind":null,"name":"align_items"},{"default":"row","kind":null,"name":"flex_direction"},{"default":"wrap","kind":null,"name":"flex_wrap"},{"default":"flex-start","kind":null,"name":"justify_content"}]},{"extends":null,"module":null,"name":"TemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]},{"extends":null,"module":null,"name":"MaterialTemplateActions1","overrides":[],"properties":[{"default":0,"kind":null,"name":"open_modal"},{"default":0,"kind":null,"name":"close_modal"}]}],"roots":{"references":[{"attributes":{"children":[{"id":"1187"},{"id":"1188"}],"margin":[0,0,0,0],"name":"Column03028"},"id":"1186","type":"Column"},{"attributes":{"args":{"source":{"id":"1188"},"target":{"id":"1187"}},"code":"\n    var labels = ['<b>0</b>', '<b>2</b>', '<b>4</b>', '<b>6</b>', '<b>8</b>', '<b>10</b>']\n    target.text = labels[source.value]\n    "},"id":"1189","type":"CustomJS"},{"attributes":{"code":"\nvar state = null\nfor (var root of cb_obj.document.roots()) {\n  if (root.id == '1185') {\n    state = root;\n    break;\n  }\n}\nif (!state) { return; }\nstate.set_state(cb_obj, cb_obj.value)\n"},"id":"1190","type":"CustomJS"},{"attributes":{"children":[{"id":"1186"},{"id":"1183"}],"margin":[0,0,0,0],"name":"Row03012","tags":["embedded"]},"id":"1181","type":"Row"},{"attributes":{"css_classes":["markdown"],"margin":[5,5,5,5],"name":"ParamFunction03005","text":"&lt;p&gt;0 * 5 = 0&lt;/p&gt;"},"id":"1184","type":"panel.models.markup.HTML"},{"attributes":{"margin":[5,0,0,10],"name":"","style":{"white-space":"nowrap"},"text":"<b>0</b>"},"id":"1187","type":"Div"},{"attributes":{"state":{"0":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;0 * 5 = 0&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1196\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"1":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;2 * 5 = 10&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1195\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"2":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;4 * 5 = 20&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1194\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"3":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;6 * 5 = 30&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1193\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"4":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;8 * 5 = 40&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1192\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"},"5":{"content":"{\"events\": [{\"attr\": \"text\", \"kind\": \"ModelChanged\", \"model\": {\"id\": \"1184\"}, \"new\": \"&lt;p&gt;10 * 5 = 50&lt;/p&gt;\"}], \"references\": []}","header":"{\"msgid\": \"1191\", \"msgtype\": \"PATCH-DOC\"}","metadata":"{}"}},"values":[0],"widgets":{"1188":0}},"id":"1185","type":"panel.models.state.State"},{"attributes":{"end":5,"js_property_callbacks":{"change:value":[{"id":"1189"},{"id":"1190"}]},"margin":[0,10,5,10],"show_value":false,"start":0,"tooltips":false,"value":0},"id":"1188","type":"Slider"},{"attributes":{"children":[{"id":"1184"}],"margin":[0,0,0,0],"name":"Row03009"},"id":"1183","type":"Row"}],"root_ids":["1181","1185"]},"title":"Bokeh Application","version":"2.3.3"}};
    var render_items = [{"docid":"456a9d61-88d1-4780-9fba-9496a40e40e7","root_ids":["1181"],"roots":{"1181":"23b0c213-ebef-420c-b0d4-db73a8236e07"}}];
    root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined && root.Bokeh.Panel !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
<p>The full set of options for the embed method include:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">max_states</span></code></strong>: The maximum number of states to embed</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">max_opts</span></code></strong>: The maximum number of states for a single widget</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">states</span></code></strong> (default={}): A dictionary specifying the widget values to embed for each widget</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">json</span></code></strong> (default=True): Whether to export the data to json files</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">save_path</span></code></strong> (default=’./’): The path to save json files to</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">load_path</span></code></strong> (default=None):  The path or URL the json files will be loaded from (same as <code class="docutils literal notranslate"><span class="pre">save_path</span></code> if not specified)</p></li>
</ul>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">progress</span></code></strong> (default=False): Whether to report progress</p></li>
</ul>
<p>As you might imagine if there are multiple widgets there can quickly be a combinatorial explosion of states so by default the output is limited to about 1000 states. For larger apps the states can also be exported to json files, e.g. if you want to serve the app on a website specify the <code class="docutils literal notranslate"><span class="pre">save_path</span></code> to declare where it will be stored and the <code class="docutils literal notranslate"><span class="pre">load_path</span></code> to declare where the JS code running on the website will look for the files.</p>
</div>
<div class="section" id="saving">
<h2>Saving<a class="headerlink" href="#saving" title="Permalink to this headline">¶</a></h2>
<p>In case you don’t need an actual server or simply want to export a static snapshot of a panel app, you can use the <code class="docutils literal notranslate"><span class="pre">save</span></code> method, which allows exporting the app to a standalone HTML or PNG file.</p>
<p>By default, the HTML file generated will depend on loading JavaScript code for BokehJS from the online <code class="docutils literal notranslate"><span class="pre">CDN</span></code> repository, to reduce the file size. If you need to work in an airgapped or no-network environment, you can declare that <code class="docutils literal notranslate"><span class="pre">INLINE</span></code> resources should be used instead of <code class="docutils literal notranslate"><span class="pre">CDN</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.resources</span> <span class="kn">import</span> <span class="n">INLINE</span>
<span class="n">panel</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">'test.html'</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">INLINE</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally the save method also allows enabling the <code class="docutils literal notranslate"><span class="pre">embed</span></code> option, which, as explained above, will embed the apps state in the app or save the state to json files which you can ship alongside the exported HTML.</p>
<p>Finally, if a ‘png’ file extension is specified, the exported plot will be rendered as a PNG, which currently requires Selenium and PhantomJS to be installed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pane</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div id="scroller-right">This web page was generated from a Jupyter notebook and not all interactivity will work on this website. <a href="https://raw.githubusercontent.com/holoviz/panel/master/examples/user_guide/Deploy_and_Export.ipynb">Right click to download and run locally</a> for full Python-backed interactivity.</div><hr class="docutils"/>
<p><a class="reference external" href="https://raw.githubusercontent.com/holoviz/panel/master/examples/user_guide/Deploy_and_Export.ipynb">Right click to download this notebook from GitHub.</a></p>
</div>
</div>
<div class="prev-next-bottom">
<a class="left-prev" href="Customization.html" id="prev-link" title="previous page">Customization</a>
<a class="right-next" href="Interact.html" id="next-link" title="next page">Interact</a>
</div>
</main>
</div>
</div>
<script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<div class="footer-item">
<p class="copyright">
    © Copyright 2019-2021 Panel contributors.<br/>
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br/>
</p>
</div>
</div>
</footer>
</body>
</html>